---
layout: post
category: jekyll
tagline: "build blog"
tags: [jekyll]
---
{% include JB/setup %}

jekyll博客搭建(1)
================

## 快速指南

### 首先确保已经安装以下依赖配置

+ Ruby
+ RubyGems
+ Linux, Unix, or Mac OS X

### 借助 RubyGems 安装 Jekyll
    
    $ gem install jekyll

### 开始你的博客吧~~

```javascript
~ $ gem install jekyll
~ $ jekyll new myblog
~ $ cd myblog
~/myblog $ jekyll serve
# => Now browse to http://localhost:4000
```
> **新站点的默认 Markdown 引擎是 Redcarpet**  
> 在 Jekyll 1.1 中，我们改变了默认的 Markdown 引擎，对于jekyll new产生的新站点，引擎将采用 Redcarpet。

## 基本用法

```javascript
$ jekyll build
# => 当前文件夹中的内容将会生成到 ./site 文件夹中。

$ jekyll build --destination <destination>
# => 当前文件夹中的内容将会生成到目标文件夹<destination>中。

$ jekyll build --source <source> --destination <destination>
# => 指定源文件夹<source>中的内容将会生成到目标文件夹<destination>中。

$ jekyll build --watch
# => 当前文件夹中的内容将会生成到 ./site 文件夹中，
#    查看改变，并且自动再生成。

===========================================================================

$ jekyll serve
# => 一个开发服务器将会运行在 http://localhost:4000/

$ jekyll serve --detach
# => 功能和`jekyll serve`命令相同，但是会脱离终端在后台运行。
#    如果你想关闭服务器，可以使用`kill -9 1234`命令，"1234" 是进程号（PID）。
#    如果你找不到进程号，那么就用`ps aux | grep jekyll`命令来查看，然后关闭服务器。[更多](http://unixhelp.ed.ac.uk/shell/jobz5.html).

$ jekyll serve --watch
# => 和`jekyll serve`相同，但是会查看变更并且自动再生成。
```

还有一些可以配置的配置选项. 很多配置选项既可以在命令行中作为标识(flags)设定，也可以在源文件根目录中的 `_config.yml` 文件中进行设定。Jekyll 会自动加载这些配置。

## 目录结构

一个基本的 Jekyll 网站的目录结构一般是像这样的：

```
.
├── _config.yml
├── _drafts
|   ├── begin-with-the-crazy-ideas.textile
|   └── on-simplicity-in-technology.markdown
├── _includes
|   ├── footer.html
|   └── header.html
├── _layouts
|   ├── default.html
|   └── post.html
├── _posts
|   ├── 2007-10-29-why-every-programmer-should-play-nethack.textile
|   └── 2009-04-26-barcamp-boston-4-roundup.textile
├── _site
└── index.html
```
来看看这些都有什么用：

![](http://i.imgur.com/uiLWFSB.jpg)


## 配置设置

### 全局配置

![](http://i.imgur.com/Qfo0580.jpg)

### 编译选项

![](http://i.imgur.com/HTITT15.jpg)

### 服务选项

![](http://i.imgur.com/dbAMQIO.jpg)

> **不要在配置文件中使用 tab 制表符**  
> 这将造成解析错误，或倒回到默认设置。请使用空格替代。

### 默认配置

> **有两个 kramdown 的选项不支持**  
> 注意 Jekyll 当前不支持 remove_block_html_tags 和  remove_span_html_tags ，因为没有被包含到 kramdown HTML 转换器中。

```
source:      .
destination: ./_site
plugins:     ./_plugins
layouts:     ./_layouts
include:     ['.htaccess']
exclude:     []
keep_files:  ['.git','.svn']
timezone:    nil
encoding:    nil

future:      true
show_drafts: nil
limit_posts: 0
pygments:    true

relative_permalinks: true

permalink:     date
paginate_path: 'page:num'

markdown:      maruku
markdown_ext:  markdown,mkd,mkdn,md
textile_ext:   textile

excerpt_separator: "\n\n"

safe:        false
watch:       false    # deprecated
server:      false    # deprecated
host:        0.0.0.0
port:        4000
baseurl:     /
url:         http://localhost:4000
lsi:         false

maruku:
  use_tex:    false
  use_divs:   false
  png_engine: blahtex
  png_dir:    images/latex
  png_url:    /images/latex

rdiscount:
  extensions: []

redcarpet:
  extensions: []

kramdown:
  auto_ids: true
  footnote_nr: 1
  entity_output: as_char
  toc_levels: 1..6
  smart_quotes: lsquo,rsquo,ldquo,rdquo
  use_coderay: false

  coderay:
    coderay_wrap: div
    coderay_line_numbers: inline
    coderay_line_numbers_start: 1
    coderay_tab_width: 4
    coderay_bold_every: 10
    coderay_css: style

redcloth:
  hard_breaks: true
```

### Markdown 选项

#### Redcarpet

Redcarpet支持设置 `extensions` ，值为一个字符串数组，每个字符串都是 `Redcarpet::Markdown` 类的扩展，相应的扩展就会设置为 `true` 。

**Jekyll handles two special Redcarpet extensions:**

+ `no_fenced_code_blocks` — 默认的， Jekyll 设置扩展 `fenced_code_blocks` (用三个波浪线或重音线标记代码区间) 为 `true` ，这或许是跟 GitHub 积极的采用有关。当使用Jekyll的时候， Redcarpet 的扩展 `fenced_code_blocks` 无效，作为替代方案，你可以这样做：
注意你还可以这样来配置语言以支持语法高亮：
  ```ruby
  # ...ruby code
  ```
有了 both fenced code blocks 和 pygments ，就会直接高亮代码了；如果没有 pygments，将增加一个 `class="LANGUAGE"` 属性到 `<code>` 元素，用于给不同的 JavaScript 代码高亮库做后续处理。


+ smart — 打开 SmartyPants ，将引号转为 " 、连字符转为 em (---) 和 en (--) 破折号。